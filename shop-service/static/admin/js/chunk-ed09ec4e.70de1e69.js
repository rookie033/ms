(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed09ec4e"],{"941c":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-page-header",{attrs:{content:"增加商品信息"},on:{back:e.handleBack}}),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"auto",rules:e.rules}},[t("el-form-item",{attrs:{size:"mini",prop:"name",label:"商品名称"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.name,callback:function(r){e.$set(e.addForm,"name","string"===typeof r?r.trim():r)},expression:"addForm.name"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"price",label:"商品价格"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.price,callback:function(r){e.$set(e.addForm,"price",e._n(r))},expression:"addForm.price"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"count",label:"商品库存"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.count,callback:function(r){e.$set(e.addForm,"count",e._n(r))},expression:"addForm.count"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"discount",label:"商品折扣"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.discount,callback:function(r){e.$set(e.addForm,"discount",e._n(r))},expression:"addForm.discount"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"goodsTypeId",label:"商品类型"}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.addForm.goodsTypeId,callback:function(r){e.$set(e.addForm,"goodsTypeId","string"===typeof r?r.trim():r)},expression:"addForm.goodsTypeId"}},e._l(e.goodsTypeList,(function(e){return t("el-option",{key:""+e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{size:"mini",label:"商品logo",prop:"logo"}},[t("p-upload",{attrs:{"list-type":"picture-card",limit:1,action:"/log/file/upload","before-upload":e.handleBeforeUpload,"on-error":e.handleError},model:{value:e.fileList,callback:function(r){e.fileList=r},expression:"fileList"}})],1),t("el-form-item",{attrs:{size:"mini",label:"商品图片",prop:"pics"}},[t("p-upload",{attrs:{"list-type":"picture-card",limit:3,action:"/log/file/upload","before-upload":e.handleBeforeUpload,"on-error":e.handleError1},model:{value:e.fileList1,callback:function(r){e.fileList1=r},expression:"fileList1"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"description",label:"商品描述"}},[t("el-input",{attrs:{"show-word-limit":"",maxlength:"300",type:"textarea",placeholder:"请输入",clearable:""},model:{value:e.addForm.description,callback:function(r){e.$set(e.addForm,"description",e._n(r))},expression:"addForm.description"}})],1),t("el-form-item",{attrs:{size:"mini",prop:"remark",label:"商品备注"}},[t("el-input",{attrs:{"show-word-limit":"",maxlength:"300",type:"textarea",placeholder:"请输入",clearable:""},model:{value:e.addForm.remark,callback:function(r){e.$set(e.addForm,"remark",e._n(r))},expression:"addForm.remark"}})],1),t("el-form-item",{attrs:{size:"mini"}},[t("el-button",{attrs:{loading:e.subLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],i=t("5530"),n=t("1da1"),l=(t("a15b"),t("d81d"),t("c975"),t("b0c0"),t("d3b7"),t("96cf"),t("2f62")),d={name:"goods-add",data:function(){var e=this;return{rules:{name:[{required:!0,message:"请输入商品名称"}],price:[{required:!0,validator:function(e,r,t){r<0?t("商品价格不能为负数"):t()}}],count:[{required:!0,validator:function(e,r,t){r<0?t("库存不能为负数"):t()}}],discount:[{required:!0,validator:function(e,r,t){r<1||r>10?t("商品折扣只能在1-10之间"):t()}}],goodsTypeId:[{required:!0,message:"请选择商品类型"}],logo:[{required:!0,validator:function(r,t,o){e.fileList.length>0&&void 0!=e.fileList[0].url?o():o(new Error("请上传一个logo"))}}],pics:[{required:!0,validator:function(r,t,o){e.fileList1.length>0?o():o(new Error("请上至少上传一个商品图片"))}}],description:[{required:!0,message:"请输入商品描述"}]},fileList:[],fileList1:[],addForm:{name:"",price:0,zheKou:10,goodsTypeId:"",description:"",logo:"",pics:[],remark:"",count:0},subLoading:!1}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getGoodsTypeListAll();case 2:case"end":return r.stop()}}),r)})))()},computed:Object(i["a"])({},Object(l["e"])("goodsModel",["goodsTypeList"])),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])("goodsModel",["getGoodsTypeListAll","insert"])),{},{handleBack:function(){this.$router.history.go(-1)},handleAdd:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.addForm.validate()["catch"]((function(e){return e}));case 2:if(t=r.sent,!t){r.next=11;break}return e.addForm.logo=e.fileList[0].url,e.addForm.pics=e.fileList1.map((function(e){return e.url})).join(","),e.subLoading=!0,r.next=9,e.insert(e.addForm);case 9:e.subLoading=!1,e.handleBack();case 11:case"end":return r.stop()}}),r)})))()},handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleError:function(e){this.$notify({title:"提示",message:"上传logo失败",type:"error"})},handleError1:function(e){this.$notify({title:"提示",message:"上传商品图片失败",type:"error"})}})},s=d,c=t("2877"),u=Object(c["a"])(s,o,a,!1,null,"1d8dfea8",null);r["default"]=u.exports},a15b:function(e,r,t){"use strict";var o=t("23e7"),a=t("44ad"),i=t("fc6a"),n=t("a640"),l=[].join,d=a!=Object,s=n("join",",");o({target:"Array",proto:!0,forced:d||!s},{join:function(e){return l.call(i(this),void 0===e?",":e)}})}}]);
//# sourceMappingURL=chunk-ed09ec4e.70de1e69.js.map