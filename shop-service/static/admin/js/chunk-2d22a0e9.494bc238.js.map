{"version":3,"sources":["webpack:///./src/views/test/user-test/user-test-add.vue?074f","webpack:///src/views/test/user-test/user-test-add.vue","webpack:///./src/views/test/user-test/user-test-add.vue?fcd5","webpack:///./src/views/test/user-test/user-test-add.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","handleBack","ref","addForm","rules","model","value","callback","$$v","$set","trim","expression","_l","item","key","id","name","loading","handleSubmit","_v","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,QAAU,UAAUC,GAAG,CAAC,KAAOP,EAAIQ,cAAcJ,EAAG,UAAU,CAACK,IAAI,UAAUH,MAAM,CAAC,MAAQN,EAAIU,QAAQ,MAAQV,EAAIW,MAAM,cAAc,SAAS,CAACP,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,KAAO,aAAa,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,UAAY,GAAG,YAAc,OAAOM,MAAM,CAACC,MAAOb,EAAIU,QAAgB,SAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,QAAS,WAA4B,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,uBAAuB,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,KAAO,aAAa,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,UAAY,GAAG,YAAc,OAAOM,MAAM,CAACC,MAAOb,EAAIU,QAAgB,SAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,QAAS,WAA4B,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,uBAAuB,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,KAAO,aAAa,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,UAAY,GAAG,YAAc,OAAOM,MAAM,CAACC,MAAOb,EAAIU,QAAgB,SAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,QAAS,WAA4B,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,uBAAuB,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,OAAO,KAAO,WAAW,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,UAAY,IAAIM,MAAM,CAACC,MAAOb,EAAIU,QAAc,OAAEI,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,QAAS,SAAUK,IAAMG,WAAW,mBAAmBlB,EAAImB,GAAInB,EAAY,UAAE,SAASoB,GAAM,OAAOhB,EAAG,YAAY,CAACiB,IAAID,EAAKE,GAAGhB,MAAM,CAAC,MAAQc,EAAKE,GAAG,MAAQF,EAAKG,WAAU,IAAI,GAAGnB,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,SAAS,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,QAAUN,EAAIwB,SAASjB,GAAG,CAAC,MAAQP,EAAIyB,eAAe,CAACzB,EAAI0B,GAAG,SAAS,IAAI,IAAI,IACtsDC,EAAkB,G,gDC+CtB,GACA,qBACA,KAFA,WAGA,OACA,WACA,SACA,YACA,YACA,YACA,WAIA,OAEA,UAEQ,CAAE,UAAV,EAAU,QAAV,WAAU,QAAV,UACA,2BAEA,WAEA,2BAGA,KAEA,mBAEA,UACA,kDAEA,UACA,iDACA,2BAEA,uBAEA,6BAGA,KAEA,mBAEA,QACA,qDAKA,2BACA,8CAEA,yCACA,0DADA,IAEA,WAFA,WAGA,6BAEA,aALA,WAKA,8KAEA,6DAFA,UAEA,EAFA,QAIA,EAJA,uBAMA,aANA,SAQA,oBARA,OAUA,aAEA,6BAZA,gDAiBA,QA5EA,WA4EA,wKACA,gBADA,+CC5HqX,I,YCOjXC,EAAY,eACd,EACA7B,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d22a0e9.494bc238.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-page-header',{attrs:{\"content\":\"新增用户信息\"},on:{\"back\":_vm.handleBack}}),_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.rules,\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"用户账号\",\"size\":\"mini\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入\"},model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户昵称\",\"size\":\"mini\",\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入\"},model:{value:(_vm.addForm.nickname),callback:function ($$v) {_vm.$set(_vm.addForm, \"nickname\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户密码\",\"size\":\"mini\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入\"},model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\",\"size\":\"mini\",\"prop\":\"roleId\"}},[_c('el-select',{attrs:{\"clearable\":\"\"},model:{value:(_vm.addForm.roleId),callback:function ($$v) {_vm.$set(_vm.addForm, \"roleId\", $$v)},expression:\"addForm.roleId\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.name}})}),1)],1),_c('el-form-item',{attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 将页面改造成如下效果并阅读注释学习form的新属性 -->\n<template>\n\t<div>\n\t\t<el-page-header @back=\"handleBack\" content=\"新增用户信息\"></el-page-header>\n\t\t<!-- \n\t\t\tmodel绑定的addForm是为了关联rules中表单验证对象使用的，相当于指定了这个表单要验证的对象是哪个对象\n\t\t  ref相当于对这个表单组件进行命名，我们可以通过this.$refs.addForm来直接拿到这个表单组件。\n\t\t\trules代表表单验证对象，绑定了表单验证对象之后就可以在rules中编写校验规则\n\t\t\tlabel-width=\"auto\"是让左侧的label可以自适应排列\n\t\t\n\t\t-->\n\t\t<!-- {{roleList}} -->\n    <el-form :model=\"addForm\" ref=\"addForm\" :rules=\"rules\" label-width=\"auto\">\n\t\t\t<!-- \n\t\t\t\tlabel代表表单的标题\n\t\t\t\tsize不多做解释了\n\t\t\t\tprop=\"username\"代表用户账号的addForm.username这个值在rules里对应的key也是username，结合rules中定义的key理解\n\t\t\t\t\t\n\t\t\t-->\n      <el-form-item label=\"用户账号\" size=\"mini\" prop=\"username\">\n        <!-- v-model绑定了addForm.username并且通过外层嵌套的prop关联到了rules中的username  v-model.trim代表输入的内容前后不允许输入空格-->\n\t\t\t\t<el-input clearable placeholder=\"请输入\" v-model.trim=\"addForm.username\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"用户昵称\" size=\"mini\" prop=\"nickname\">\n\t\t\t\t<el-input clearable placeholder=\"请输入\" v-model.trim=\"addForm.nickname\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"用户密码\" size=\"mini\" prop=\"password\">\n\t\t\t\t<el-input clearable placeholder=\"请输入\" v-model.trim=\"addForm.password\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"角色\" size=\"mini\" prop=\"roleId\">\n\t\t\t\t<el-select clearable v-model=\"addForm.roleId\">\n\t\t\t\t  <!-- 循环roleList将角色的id设置到value中，将角色的名称设置到label中展示到页面 -->\n\t\t\t\t\t<el-option v-for=\"item in roleList\"\n\t\t\t\t             :key=\"item.id\"\n\t\t\t\t             :value=\"item.id\"\n\t\t\t\t             :label=\"item.name\">\n\t\t\t\t  </el-option>\n\t\t\t\t</el-select>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item size=\"mini\">\n\t\t\t\t<el-button type=\"primary\" :loading=\"loading\" @click=\"handleSubmit\">提交</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n</template>\n\n<script>\n\timport { mapState,mapActions } from 'vuex'\n\texport default{\n\t\tname:'user-test-add',\n\t\tdata(){\n\t\t  return {\n\t\t\t\tloading:false,\n\t\t    addForm:{\n\t\t      username:'',//用户账号\n\t\t      nickname:'',//用户昵称\n\t\t      password:'',//用户密码\n\t\t      roleId:'',//角色id,\n\t\t\t\t\t\n\t\t    },\n        //表单校验对象,表单校验对象rules绑定在form之后会根据每个el-form-item上绑定的prop建立关联关系，如第一行的prop为username，所以这里的username就是用来校验用户账号的\n\t\t\t\trules:{\n      \t\t//校验对象的结构是一个数组每个元素有固定写法    \n\t\t\t\t\tusername:[\n            //这里是校验非空对象的基本写法，required代表是否必填，message是验证不通过时的提示内容，trigger代表通过什么事件触发校验事件（支持input可用的所有事件）\n            {required:true,message:'用户名不可以为空',trigger:'change'},\n\t\t\t\t\t\t{validator:function(rule,value,callback){\n\t\t\t\t\t\t\t//下面我们来对表单增加一个校验，要求用户账号必须满足6位以上包含六位\n\t\t\t\t\t\t\tif(value.length<6){\n\t\t\t\t\t\t\t\t//不满足条件，返回错误信息\n\t\t\t\t\t\t\t\tcallback(new Error('用户账号不能少于6位'))\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t//满足条件调用callback让验证通过\n\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},trigger:'change'}\n          ],\n\t\t\t\t\tnickname:[\n\t\t\t\t\t\t{required:true,message:'昵称不可以为空',trigger:'change'},\n\t\t\t\t\t],\n\t\t\t\t\tpassword:[\n\t\t\t\t\t\t{required:true,message:'密码不可以为空',trigger:'change'},\n\t\t\t\t\t\t{validator:function(rule,value,callback){\n\t\t\t\t\t\t\t//下面我们来对表单增加一个校验，要求用户账号必须满足6位以上包含六位\n\t\t\t\t\t\t\tif(value.length<6||value.length>8){\n\t\t\t\t\t\t\t\t//不满足条件，返回错误信息\n\t\t\t\t\t\t\t\tcallback(new Error('密码的长度只能在6-8位'))\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t//满足条件调用callback让验证通过\n\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},trigger:'change'}\n\t\t\t\t\t],\n\t\t\t\t\troleId:[\n\t\t\t\t\t\t{required:true,message:'角色不可以为空',trigger:'change'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t  }\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapState('userTestModel',['roleList'])\n\t\t},\n\t\tmethods:{\n\t\t\t...mapActions('userTestModel',['getRoleList','insert']),\n\t\t\thandleBack(){\n\t\t\t\tthis.$router.history.go(-1)\n\t\t\t},\n\t\t\tasync handleSubmit(){\n\t\t\t  //在提交逻辑执行之前先调用手动表单验证\n\t\t\t  let valid =await this.$refs.addForm.validate().catch(err => err);\n\t\t\t  //验证通过后在执行提交逻辑\n\t\t\t  if(valid){\n\t\t\t    //让按钮转圈\n\t\t\t    this.loading = true;\n\t\t\t    //调用insert函数并将参数addForm传入\n\t\t\t    await this.insert(this.addForm)\n\t\t\t    //取消动画\n\t\t\t    this.loading = false;\n\t\t\t    //回到查询页面\n\t\t\t    this.$router.push('/user-test')\n\t\t\t  }\n\t\t\t\n\t\t\t}\n\t\t},\n\t\tasync created(){\n\t\t\tawait this.getRoleList();\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-test-add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-test-add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user-test-add.vue?vue&type=template&id=7f87221a&\"\nimport script from \"./user-test-add.vue?vue&type=script&lang=js&\"\nexport * from \"./user-test-add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}