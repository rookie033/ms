(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2088c5"],{a4ea:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p-page-header",{attrs:{title:"文件上传练习"}}),r("h4",[e._v("无鉴权时")]),r("upload-test1"),r("h4",[e._v("有鉴权时")]),r("upload-test2"),r("h4",[e._v("组件样式")]),r("upload-test3"),r("h4",[e._v("二次封装自定义组件")]),r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.listType,callback:function(t){e.listType=t},expression:"listType"}},[r("el-option",{attrs:{label:"text",value:"text"}}),r("el-option",{attrs:{label:"picture",value:"picture"}}),r("el-option",{attrs:{label:"picture-card",value:"picture-card"}})],1),r("p-upload",{attrs:{action:"/file/upload",data:e.data,limit:3,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess,"on-error":e.handleError,"list-type":e.listType},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[r("template",{slot:"tip"},[e._v("123123")])],2),e._v(e._s(e.fileList)+" ")],1)},a=[],l=(r("c975"),r("b0c0"),r("d3b7"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{attrs:{action:e.url,"file-list":e.fileList,limit:2,data:e.uploadData,"on-exceed":e.handleExceed,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess,"before-remove":e.handleBeforeRemove,"on-remove":e.handleRemove}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg,png,jpeg,gif格式的图片")])],1),e._v(" fileList的值:"+e._s(e.fileList)+" ")],1)}),o=[],i=r("1da1"),s=(r("96cf"),{name:"upload-test1",data:function(){return{fileList:[],url:"/shop-service/v1/file/upload/test",uploadData:{folder:"test"}}},methods:{handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleSuccess:function(e,t,r){r[r.length-1].name=e.data.fileName,r[r.length-1].url=e.data.url,this.fileList=r},handleExceed:function(){this.$notify({title:"提示",message:"文件最多只能上传两个",type:"error"})},handleBeforeRemove:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=18;break}return t.next=3,r.$confirm("正在删除该文件，点击确认继续","提示",{type:"warning"})["catch"]((function(e){return e}));case 3:if(n=t.sent,"confirm"!=n){t.next=15;break}return t.next=7,r.$http({url:"/file/delete",params:{path:e.url},method:"get"});case 7:if(a=t.sent,200!=a.data.code){t.next=12;break}return t.abrupt("return",!0);case 12:return t.abrupt("return",Promise.reject());case 13:t.next=16;break;case 15:return t.abrupt("return",Promise.reject());case 16:t.next=20;break;case 18:return console.log("在取消上传时实际上我也执行了一次beforeRemove"),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){console.log("在取消上传时实际上我也执行了一次remove"),this.fileList=t}}}),u=s,c=r("2877"),d=Object(c["a"])(u,l,o,!1,null,null,null),p=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{attrs:{action:e.url,"file-list":e.fileList,limit:2,data:e.uploadData,"on-exceed":e.handleExceed,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess,"before-remove":e.handleBeforeRemove,"on-remove":e.handleRemove,"on-error":e.handleError}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg,png,jpeg,gif格式的图片")])],1)],1)},m=[],h={name:"upload-test1",data:function(){return{fileList:[],url:"/shop-service/v1/file/upload",uploadData:{folder:"test"}}},methods:{handleError:function(e){console.log(e)},handleRequest:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}}),t)})))()},handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleSuccess:function(e,t,r){console.log(e,t,r),r[r.length-1].name=e.data.fileName,r[r.length-1].url=e.data.url,this.fileList=r},handleExceed:function(){this.$notify({title:"提示",message:"文件最多只能上传两个",type:"error"})},handleBeforeRemove:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=18;break}return t.next=3,r.$confirm("正在删除该文件，点击确认继续","提示",{type:"warning"})["catch"]((function(e){return e}));case 3:if(n=t.sent,"confirm"!=n){t.next=15;break}return t.next=7,r.$http({url:"/file/delete",params:{path:e.url},method:"get"});case 7:if(a=t.sent,200!=a.data.code){t.next=12;break}return t.abrupt("return",!0);case 12:return t.abrupt("return",Promise.reject());case 13:t.next=16;break;case 15:return t.abrupt("return",Promise.reject());case 16:t.next=20;break;case 18:return console.log("在取消上传时实际上我也执行了一次beforeRemove"),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){console.log("在取消上传时实际上我也执行了一次remove"),this.fileList=t}}},v=h,g=Object(c["a"])(v,f,m,!1,null,null,null),x=g.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.listType,callback:function(t){e.listType=t},expression:"listType"}},[r("el-option",{attrs:{label:"text",value:"text"}}),r("el-option",{attrs:{label:"picture",value:"picture"}}),r("el-option",{attrs:{label:"picture-card",value:"picture-card"}})],1),r("el-upload",{attrs:{action:e.url,"file-list":e.fileList,limit:2,data:e.uploadData,"http-request":e.handleRequest,"on-exceed":e.handleExceed,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccess,"before-remove":e.handleBeforeRemove,"on-remove":e.handleRemove,"on-error":e.handleError,"list-type":e.listType}},["picture-card"!=e.listType?r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):r("el-button",{attrs:{type:"text"}},[e._v("+")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg,png,jpeg,gif格式的图片")])],1),e._v(" fileList的值:"+e._s(e.fileList)+" ")],1)},y=[],j={name:"upload-test1",data:function(){return{fileList:[],url:"/shop-service/v1/file/upload",uploadData:{folder:"test"},listType:"text"}},methods:{handleError:function(e){console.log(e)},handleRequest:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new FormData,n.append("file",e.file),n.append("folder",e.data.folder),r.next=5,t.$http({url:"/file/upload",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}});case 5:if(a=r.sent,200!=a.data.code){r.next=10;break}return r.abrupt("return",Promise.resolve(a.data));case 10:return r.abrupt("return",Promise.reject(a.data));case 11:case"end":return r.stop()}}),r)})))()},handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleSuccess:function(e,t,r){console.log(e,t,r),r[r.length-1].name=e.data.fileName,r[r.length-1].url=e.data.url,this.fileList=r},handleExceed:function(){this.$notify({title:"提示",message:"文件最多只能上传两个",type:"error"})},handleBeforeRemove:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=18;break}return t.next=3,r.$confirm("正在删除该文件，点击确认继续","提示",{type:"warning"})["catch"]((function(e){return e}));case 3:if(n=t.sent,"confirm"!=n){t.next=15;break}return t.next=7,r.$http({url:"/file/delete",params:{path:e.url},method:"get"});case 7:if(a=t.sent,200!=a.data.code){t.next=12;break}return t.abrupt("return",!0);case 12:return t.abrupt("return",Promise.reject());case 13:t.next=16;break;case 15:return t.abrupt("return",Promise.reject());case 16:t.next=20;break;case 18:return console.log("在取消上传时实际上我也执行了一次beforeRemove"),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){console.log("在取消上传时实际上我也执行了一次remove"),this.fileList=t}}},_=j,R=Object(c["a"])(_,b,y,!1,null,null,null),k=R.exports,w={components:{UploadTest1:p,UploadTest2:x,UploadTest3:k},name:"upload",data:function(){return{data:{folder:"test"},fileList:[],listType:"text"}},methods:{handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleSuccess:function(e,t,r){console.log(e,t,r)},handleError:function(e){console.log(e)}}},O=w,L=Object(c["a"])(O,n,a,!1,null,null,null);t["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d2088c5.e7d4ad8d.js.map