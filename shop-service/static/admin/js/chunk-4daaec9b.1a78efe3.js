(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4daaec9b"],{"0b45":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-page-header",{attrs:{content:"编辑角色菜单"},on:{back:e.handleBack}}),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"auto",rules:e.rules}},[r("el-form-item",{attrs:{size:"mini",prop:"roleName",label:"角色名称"}},[r("el-input",{attrs:{placeholder:"请输入",readonly:""},model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName","string"===typeof t?t.trim():t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"菜单列表"}},[r("el-tree",{ref:"tree",attrs:{data:e.menuList,"show-checkbox":"","node-key":"id","check-on-click-node":"","default-expand-all":"","expand-on-click-node":!1},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return[e._v(" "+e._s(r.name)+" ")]}}])})],1),r("el-form-item",{attrs:{size:"mini"}},[r("el-button",{attrs:{loading:e.subLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],o=r("2909"),c=r("1da1"),d=r("5530"),i=(r("99af"),r("d81d"),r("4160"),r("159b"),r("96cf"),r("2f62")),s={name:"role-add",data:function(){return{addForm:{roleName:""},rules:{roleName:[{required:!0,message:"名称不可以为空"}]},subLoading:!1,allCheckedKeys:[]}},computed:Object(d["a"])({},Object(i["e"])("roleModel",["menuList","checkMenuList"])),created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query.id,t.next=3,e.findById(r);case 3:return e.addForm=t.sent,t.next=6,e.findAllMenu();case 6:return t.next=8,e.findMenuByRoleId(r);case 8:e.setCheckMenu();case 9:case"end":return t.stop()}}),t)})))()},methods:Object(d["a"])(Object(d["a"])({},Object(i["b"])("roleModel",["update","findById","findAllMenu","findMenuByRoleId","saveMenuRole"])),{},{handleBack:function(){this.$router.history.go(-1)},handleAdd:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addForm.validate()["catch"]((function(e){return e}));case 2:if(r=t.sent,!r){t.next=12;break}if(0!=e.allCheckedKeys.length){t.next=7;break}return e.$notify.error({title:"提示",message:"请至少选择一个菜单"}),t.abrupt("return");case 7:return e.subLoading=!0,t.next=10,e.saveMenuRole({roleId:e.addForm.id,ids:e.allCheckedKeys});case 10:e.subLoading=!1,e.handleBack();case 12:case"end":return t.stop()}}),t)})))()},handleCheckChange:function(){var e=this.$refs.tree.getHalfCheckedKeys(),t=this.$refs.tree.getCheckedKeys();this.allCheckedKeys=[].concat(Object(o["a"])(t),Object(o["a"])(e))},setCheckMenu:function(){this.checkMenuList.map((function(e){return e.id}));var e=[];this.checkMenuList.forEach((function(t){t.children&&t.children.forEach((function(t){e.push(t.id)}))})),this.$refs.tree.setCheckedKeys([].concat(e),!0)}})},l=s,u=r("2877"),f=Object(u["a"])(l,n,a,!1,null,"1b583504",null);t["default"]=f.exports},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),o=r("e8b5"),c=r("861d"),d=r("7b0b"),i=r("50c4"),s=r("8418"),l=r("65f0"),u=r("1dde"),f=r("b622"),h=r("2d00"),m=f("isConcatSpreadable"),b=9007199254740991,k="Maximum allowed index exceeded",p=h>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),g=u("concat"),v=function(e){if(!c(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)},y=!p||!g;n({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,n,a,o,c=d(this),u=l(c,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?c:arguments[t],v(o)){if(a=i(o.length),f+a>b)throw TypeError(k);for(r=0;r<a;r++,f++)r in o&&s(u,f,o[r])}else{if(f>=b)throw TypeError(k);s(u,f++,o)}return u.length=f,u}})}}]);
//# sourceMappingURL=chunk-4daaec9b.1a78efe3.js.map