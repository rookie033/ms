(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-375969bc"],{baa5:function(e,r,a){var t=a("23e7"),n=a("e58c");t({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},dee2:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",[a("el-page-header",{attrs:{content:"编辑用户信息"},on:{back:e.handleBack}}),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"auto",rules:e.rules}},[a("el-form-item",{attrs:{size:"mini",prop:"username",label:"账号"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.username,callback:function(r){e.$set(e.addForm,"username","string"===typeof r?r.trim():r)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{size:"mini",prop:"password",label:"密码"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.password,callback:function(r){e.$set(e.addForm,"password","string"===typeof r?r.trim():r)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{size:"mini",prop:"nickname",label:"昵称"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.addForm.nickname,callback:function(r){e.$set(e.addForm,"nickname","string"===typeof r?r.trim():r)},expression:"addForm.nickname"}})],1),a("el-form-item",{attrs:{size:"mini",prop:"roleId",label:"角色"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.addForm.roleId,callback:function(r){e.$set(e.addForm,"roleId","string"===typeof r?r.trim():r)},expression:"addForm.roleId"}},e._l(e.roleList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{size:"mini",label:"头像",prop:"face"}},[a("p-upload",{attrs:{"list-type":"picture-card",limit:1,action:"/log/file/upload","before-upload":e.handleBeforeUpload,"on-error":e.handleError},model:{value:e.fileList,callback:function(r){e.fileList=r},expression:"fileList"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-button",{attrs:{loading:e.subLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("提交")])],1)],1)],1)],1)],1)},n=[],o=a("5530"),i=a("1da1"),l=(a("96cf"),a("baa5"),a("c975"),a("b0c0"),a("d3b7"),a("2f62")),s={name:"user-edit",data:function(){return{rules:{username:[{required:!0,message:"账号不可以为空"}],password:[{required:!0,message:"密码不可以为空"}],nickname:[{required:!0,message:"昵称不可以为空"}],roleId:[{required:!0,message:"角色不可以为空"}]},fileList:[],addForm:{username:"",password:"",nickname:"",roleId:""},subLoading:!1}},watch:{fileList:function(e){console.log(e),e.length>0&&(this.addForm.face=e[0].url)}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,t,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.$route.query.id,r.next=3,e.getRoleListAll();case 3:return r.next=5,e.findById(a);case 5:t=r.sent,e.addForm=t,void 0!=e.addForm.face&&""!=e.addForm.face&&(n={url:e.addForm.face,name:e.addForm.face.substring(e.addForm.face.lastIndexOf("/")+1)},e.fileList=[n]);case 8:case"end":return r.stop()}}),r)})))()},computed:Object(o["a"])({},Object(l["e"])("userModel",["roleList"])),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])("userModel",["getRoleListAll","findById","update"])),{},{handleBack:function(){this.$router.history.go(-1)},handleAdd:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.addForm.validate()["catch"]((function(e){return e}));case 2:if(a=r.sent,!a){r.next=9;break}return e.subLoading=!0,r.next=7,e.update(e.addForm);case 7:e.subLoading=!1,e.handleBack();case 9:case"end":return r.stop()}}),r)})))()},handleBeforeUpload:function(e){if(-1==e.name.indexOf("png")&&-1==e.name.indexOf("jpg")&&-1==e.name.indexOf("jpeg")&&-1==e.name.indexOf("gif"))return this.$notify({title:"提示",message:"只能上传图片格式的文件",type:"error"}),Promise.reject()},handleError:function(e){this.$notify({title:"提示",message:"上传失败",type:"error"})}})},d=s,c=a("2877"),u=Object(c["a"])(d,t,n,!1,null,"b94b8246",null);r["default"]=u.exports},e58c:function(e,r,a){"use strict";var t=a("fc6a"),n=a("a691"),o=a("50c4"),i=a("a640"),l=Math.min,s=[].lastIndexOf,d=!!s&&1/[1].lastIndexOf(1,-0)<0,c=i("lastIndexOf"),u=d||!c;e.exports=u?function(e){if(d)return s.apply(this,arguments)||0;var r=t(this),a=o(r.length),i=a-1;for(arguments.length>1&&(i=l(i,n(arguments[1]))),i<0&&(i=a+i);i>=0;i--)if(i in r&&r[i]===e)return i||0;return-1}:s}}]);
//# sourceMappingURL=chunk-375969bc.01c92c88.js.map