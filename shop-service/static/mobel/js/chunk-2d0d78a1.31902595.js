(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d78a1"],{"76f2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"个人信息","left-text":"返回"},on:{"click-left":e.handleLeftClick}}),n("van-cell-group",[n("van-cell",{attrs:{title:"账号",value:e.userInfo.username}}),n("van-cell",{attrs:{title:"手机号",value:e.userInfo.phone}}),n("van-field",{attrs:{label:"昵称",placeholder:"请输入昵称","input-align":"right",clearable:""},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}}),n("van-field",{attrs:{readonly:"",clickable:"",label:"城市",value:e.sexName,placeholder:"选择性别","input-align":"right"},on:{click:function(t){e.showPicker=!0}}}),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.sexList},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1),n("van-field",{attrs:{label:"邮箱",placeholder:"请输入邮箱","input-align":"right",clearable:""},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}}),n("van-cell",{attrs:{title:"头像"}},[n("van-uploader",{attrs:{deletable:"","after-read":e.handleAfterRead,"max-count":1},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1),n("div",{staticStyle:{"text-align":"center",padding:"15px"}},[n("van-button",{attrs:{type:"info"},on:{click:e.handleSubmit}},[e._v("修改")])],1)],1)},s=[],i=n("1da1"),r=(n("96cf"),n("f087")),l={methods:{handleLeftClick:function(){this.$router.history.go(-1)},onConfirm:function(e){this.sexName=e[0],this.showPicker=!1,"男"==this.sexName?this.userInfo.sex=0:this.userInfo.sex=1},handleAfterRead:function(e){var t=new FormData;t.append("file",e.file),e.status="loading",this.$http({url:"/log/file/upload",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.data.code&&(e.url=t.data.data.url,e.content=t.data.data.url,e.status="success")})).catch((function(e){}))},handleSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fileList.length>0&&(e.userInfo.face=e.fileList[0].url),t.next=3,Object(r["e"])(e.userInfo);case 3:return t.next=5,Object(r["b"])(e.userInfo.id);case 5:n=t.sent,200==n.data.code&&(e.userInfo=n.data.data,delete e.userInfo.password,sessionStorage.userInfo=JSON.stringify(e.userInfo),e.$router.history.go(-1));case 7:case"end":return t.stop()}}),t)})))()}},data:function(){return{userInfo:{},showPicker:!1,sexName:"",fileList:[],sexList:[{values:["男","女"],defaultIndex:0}]}},created:function(){this.userInfo=JSON.parse(sessionStorage.userInfo),0==this.userInfo.sex?(this.sexName="男",this.sexList[0].defaultIndex=0):1==this.userInfo.sex&&(this.sexName="女",this.sexList[0].defaultIndex=1),this.userInfo.face&&(this.fileList=[{file:{},status:"",url:this.userInfo.face}])}},o=l,u=n("2877"),c=Object(u["a"])(o,a,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0d78a1.31902595.js.map