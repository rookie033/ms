(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1705ce0"],{"16e6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回"},on:{"click-left":t.handleLeftClick}}),n("van-tabs",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusList,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name,name:t.id}})})),1),n("p-page-helper",{attrs:{disabled:t.loading},on:{"on-end":t.handleOnEnd}},t._l(t.list,(function(e){return n("van-card",{key:e.id,scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"order-title"},[t._v(" 订单编号: "+t._s(e.orderNo)+" ")]),n("div",{staticClass:"order-time"},[t._v(" 下单时间: "+t._s(t.formatTime(e.insertTime))+" ")])]},proxy:!0},{key:"desc",fn:function(){return[n("div",{staticClass:"goods-name"},[t._v(" 商品名称: "+t._s(e.goodsName)+" ")]),n("div",{staticClass:"count"},[t._v(" 购买数量: "+t._s(e.count)+" ")]),n("div",{staticClass:"pay"},[t._v(" 订单金额: "+t._s(e.pay)+" ")]),2==e.status||3==e.status?n("div",{staticClass:"express"},[t._v(" 物流单号: "+t._s(e.expressNo)+" ")]):t._e(),n("div",{staticClass:"status"},[t._v(" 订单状态: "),t._l(t.statusList,(function(r){return[e.status==r.id?n("van-tag",{key:r.id,attrs:{type:r.theme}},[t._v(" "+t._s(r.name)+" ")]):t._e()]}))],2)]},proxy:!0},{key:"tags",fn:function(){return[n("div",{staticStyle:{"text-align":"right",padding:"10px"}},[n("van-button",{attrs:{type:"info",size:"mini"},on:{click:function(n){return t.handlePreview(e)}}},[t._v("订单详情")]),0!=e.status?n("van-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.handlePreviewGoods(e)}}},[t._v("再次购买")]):t._e(),0==e.status?n("van-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.handlePay(e)}}},[t._v("支付")]):t._e(),0==e.status?n("van-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.deleteOrderBuyId(e)}}},[t._v("取消订单")]):t._e(),1==e.status||3==e.status?n("van-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.handleFallbackGoods(e)}}},[t._v("申请退款")]):t._e(),2==e.status?n("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.handleGotGoods(e)}}},[t._v("确认收货")]):t._e()],1)]},proxy:!0}],null,!0)})})),1),n("van-dialog",{attrs:{title:"退款原因","show-cancel-button":""},on:{confirm:t.onSubmit,cancel:t.onCancel},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-field",{attrs:{border:"",type:"textarea",placeholder:"请输入退款原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),n("van-dialog",{attrs:{title:"支付密码","show-cancel-button":""},on:{confirm:t.onPay},model:{value:t.payShow,callback:function(e){t.payShow=e},expression:"payShow"}},[n("van-field",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.payForm.password,callback:function(e){t.$set(t.payForm,"password",e)},expression:"payForm.password"}})],1)],1)},a=[],o=n("5530"),s=n("1da1"),i=(n("99af"),n("96cf"),n("dcbd")),u={methods:{handleLeftClick:function(){this.$router.history.go(-1)},getOrderListByUserForPage:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["e"])(t.queryForm);case 2:n=e.sent,200==n.data.code&&(t.list=n.data.data.list,t.page=n.data.data.page);case 4:case"end":return e.stop()}}),e)})))()},handleOnEnd:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.loading&&(t.loading=!0),!(t.page.pno<t.page.pCount)){e.next=7;break}return t.queryForm.pno=t.queryForm.pno+1,e.next=5,Object(i["e"])(t.queryForm);case 5:n=e.sent,200==n.data.code&&(t.list=t.list.concat(n.data.data.list),t.page=n.data.data.page,t.loading=!1);case 7:case"end":return e.stop()}}),e)})))()},handlePreview:function(t){this.$router.push({path:"/order-info",query:{orderNo:t.orderNo}})},handlePreviewGoods:function(t){this.$router.push({path:"/shop-info",query:{id:t.goodsId}})},handleGotGoods:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$dialog.confirm({title:"提示",message:"正在确认收货，请确认您的货物已收到并无问题"}).catch((function(t){return t}));case 2:if(r=n.sent,"confirm"!=r){n.next=10;break}return n.next=6,Object(i["d"])(t.id);case 6:return a=n.sent,200==a.data.code&&e.$notify({type:"success",message:a.data.msg}),n.next=10,e.getOrderListByUserForPage(e.queryForm);case 10:case"end":return n.stop()}}),n)})))()},deleteOrderBuyId:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$dialog.confirm({title:"提示",message:"正在取消订单确认继续"}).catch((function(t){return t}));case 2:if(r=n.sent,"confirm"!=r){n.next=8;break}return n.next=6,Object(i["a"])(t.id);case 6:return n.next=8,e.getOrderListByUserForPage();case 8:case"end":return n.stop()}}),n)})))()},handleFallbackGoods:function(t){this.reason="",this.subForm={},this.show=!0,this.subForm=t},onSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.subForm.fallbackReason=t.reason,e.next=3,Object(i["b"])(Object(o["a"])({},t.subForm));case 3:if(n=e.sent,200!=n.data.code){e.next=7;break}return e.next=7,t.getOrderListByUserForPage(t.queryForm);case 7:case"end":return e.stop()}}),e)})))()},onCancel:function(){console.log("cancel"),this.subForm={}},handlePay:function(t){this.payShow=!0,this.payForm=t},onPay:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["h"])({id:t.payForm.id,password:t.payForm.password});case 2:return e.sent,e.next=5,t.getOrderListByUserForPage(t.queryForm);case 5:case"end":return e.stop()}}),e)})))()}},computed:{formatTime:function(){return function(t){var e=new Date(t);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}}},data:function(){return{queryForm:{orderNo:"",pno:1,psize:10,status:0},reason:"",show:!1,page:{},subForm:{},list:[],loading:!1,payForm:{},payShow:!1,statusList:[{id:0,name:"待支付",theme:"primary"},{id:1,name:"已支付",theme:"primary"},{id:2,name:"已发货",theme:"warning"},{id:3,name:"确认收货",theme:"success"},{id:4,name:"申请退货",theme:"danger"},{id:5,name:"退货完毕",theme:"success"}],status:0}},watch:{status:function(t){this.queryForm.status=t,this.queryForm.pno=1,this.loading=!1,this.getOrderListByUserForPage()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getOrderListByUserForPage();case 2:case"end":return e.stop()}}),e)})))()}},c=u,d=n("2877"),l=Object(d["a"])(c,r,a,!1,null,null,null);e["default"]=l.exports},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),o=n("e8b5"),s=n("861d"),i=n("7b0b"),u=n("50c4"),c=n("8418"),d=n("65f0"),l=n("1dde"),p=n("b622"),h=n("2d00"),f=p("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=h>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=l("concat"),b=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},w=!v||!y;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,n,r,a,o,s=i(this),l=d(s,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?s:arguments[e],b(o)){if(a=u(o.length),p+a>m)throw TypeError(g);for(n=0;n<a;n++,p++)n in o&&c(l,p,o[n])}else{if(p>=m)throw TypeError(g);c(l,p++,o)}return l.length=p,l}})},dcbd:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return d})),n.d(e,"a",(function(){return l}));n("99af");var r=n("db04"),a=function(t){return r["a"].http({url:"/shop/order/insert",method:"put",data:t})},o=function(t){return r["a"].http({url:"/shop/order/insert/buy-car",method:"put",data:t})},s=function(t){return r["a"].http({url:"/shop/order/list/page/user",method:"get",params:t})},i=function(t){return r["a"].http({url:"/shop/order/find/orderNo/".concat(t),method:"get"})},u=function(t){return r["a"].http({url:"/shop/order/get/goods",method:"get",params:{id:t}})},c=function(t){return r["a"].http({url:"/shop/order/fallback/goods",method:"post",data:t})},d=function(t){return r["a"].http({url:"/shop/order/update/team/id/".concat(t.id,"/password/").concat(t.password),method:"put"})},l=function(t){return r["a"].http({url:"/shop/order/delete-order/id/".concat(t),method:"delete"})}}}]);
//# sourceMappingURL=chunk-f1705ce0.ea72548e.js.map