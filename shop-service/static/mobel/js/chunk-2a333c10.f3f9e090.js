(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a333c10"],{"13d5":function(t,e,r){"use strict";var n=r("23e7"),o=r("d58f").left,a=r("a640"),s=r("2d00"),d=r("605d"),i=a("reduce"),u=!d&&s>79&&s<83;n({target:"Array",proto:!0,forced:!i||u},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"503f":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-page"},[r("van-nav-bar",{attrs:{title:"下单","left-text":"返回"},on:{"click-left":t.handleLeftClick}}),r("van-cell-group",[r("van-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.formList,(function(e,n){return r("van-collapse-item",{key:e.id,attrs:{name:n+1},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",[r("van-tag",{attrs:{type:"primary"}},[t._v("商品"+t._s(n+1))]),t._v(" :"+t._s(e.goodsName)+", "),r("van-tag",{attrs:{type:"danger"}},[t._v("价格")]),t._v(" :"+t._s(e.goodsPrice*e.goodsDiscount/10*e.buyCount)+" ")],1)]},proxy:!0}],null,!0)},[r("van-cell",{attrs:{title:"商品名称",value:e.goodsName}}),r("van-cell",{attrs:{title:"商品原价",value:e.goodsPrice}}),r("van-cell",{attrs:{title:"商品折扣",value:e.goodsDiscount}}),r("van-cell",{attrs:{title:"商品库存",value:e.goodsCount}}),r("van-cell",{attrs:{title:"商品描述",value:e.goodsDescription}}),r("van-cell",{attrs:{title:"购买数量",value:e.buyCount}}),r("van-cell",{attrs:{title:"总价",value:e.goodsPrice*e.goodsDiscount/10*e.buyCount}})],1)})),1),t.hasAddress?r("van-cell",{attrs:{title:"收货地址","is-link":"",to:"/user-address",value:t.getAddressStr}}):r("van-cell",{attrs:{title:"收货地址","is-link":"",value:"点击设置",to:"/user-address"}}),r("van-field",{attrs:{rows:"2",autosize:"",label:"备注",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),r("van-submit-bar",{attrs:{price:t.getTotalPrice,"button-text":"提交订单"},on:{submit:t.handleShowPassword}}),r("van-dialog",{attrs:{title:"支付密码","show-cancel-button":""},on:{confirm:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("van-field",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)},o=[],a=r("5530"),s=r("1da1"),d=(r("96cf"),r("13d5"),r("d81d"),r("e6e4")),i=r("dcbd"),u={computed:{getAddressStr:function(){return this.addressInfo.province+this.addressInfo.city+this.addressInfo.area+this.addressInfo.address},getTotalPrice:function(){if(0==this.formList.length)return 0;if(1==this.formList.length){var t=this.formList[0],e=t.goodsPrice*t.goodsDiscount/10*t.buyCount;return 100*e}var r=this.formList.reduce((function(t,e,r,n){var o=e.goodsPrice*e.goodsDiscount/10*e.buyCount;if(1==r){var a=t.goodsPrice*t.goodsDiscount/10*t.buyCount;return a+o}return t+o}));return 100*r}},methods:{handleLeftClick:function(){this.$router.history.go(-1)},getAddressListForPage:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["c"])({pno:1,psize:10});case 2:r=e.sent,200==r.data.code&&(n=r.data.data.list,0==n.length||1!=n[0].isDefault?t.hasAddress=!1:(t.hasAddress=!0,t.addressInfo=n[0]));case 4:case"end":return e.stop()}}),e)})))()},handleShowPassword:function(){0!=this.hasAddress?this.show=!0:this.$notify({type:"danger",message:"您还没有选择收货地址"})},onSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.formList,n=t.addressInfo,r=r.map((function(e){return Object(a["a"])(Object(a["a"])({},n),{},{goodsId:e.goodsId,type:2,buyCarId:e.id,addressId:n.id,count:e.buyCount,pay:e.goodsPrice*e.goodsDiscount/10*e.buyCount,remark:t.remark,goodsName:e.goodsName,goodsPrice:e.goodsPrice,goodsDiscount:e.goodsDiscount})})),o={password:t.password,orders:r},console.log(o),e.next=7,Object(i["g"])(o);case 7:s=e.sent,200==s.data.code&&(t.$notify({type:"success",message:s.data.msg}),t.$router.history.go(-1));case 9:case"end":return e.stop()}}),e)})))()}},data:function(){return{formData:{},formList:[],addressInfo:{},hasAddress:!1,show:!1,activeNames:[1],remark:"",password:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAddressListForPage();case 2:r=t.$route.params.formList,console.log(r),void 0==r&&(r=JSON.parse(sessionStorage.orderData2)),sessionStorage.orderData2=JSON.stringify(r),t.formList=r;case 7:case"end":return e.stop()}}),e)})))()}},c=u,l=(r("fb30"),r("2877")),f=Object(l["a"])(c,n,o,!1,null,"635b3df2",null);e["default"]=f.exports},"99af":function(t,e,r){"use strict";var n=r("23e7"),o=r("d039"),a=r("e8b5"),s=r("861d"),d=r("7b0b"),i=r("50c4"),u=r("8418"),c=r("65f0"),l=r("1dde"),f=r("b622"),h=r("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=l("concat"),w=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},y=!v||!b;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,r,n,o,a,s=d(this),l=c(s,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?s:arguments[e],w(a)){if(o=i(a.length),f+o>g)throw TypeError(m);for(r=0;r<o;r++,f++)r in a&&u(l,f,a[r])}else{if(f>=g)throw TypeError(m);u(l,f++,a)}return l.length=f,l}})},d0fc:function(t,e,r){},d58f:function(t,e,r){var n=r("1c0b"),o=r("7b0b"),a=r("44ad"),s=r("50c4"),d=function(t){return function(e,r,d,i){n(r);var u=o(e),c=a(u),l=s(u.length),f=t?l-1:0,h=t?-1:1;if(d<2)while(1){if(f in c){i=c[f],f+=h;break}if(f+=h,t?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:l>f;f+=h)f in c&&(i=r(i,c[f],f,u));return i}};t.exports={left:d(!1),right:d(!0)}},d81d:function(t,e,r){"use strict";var n=r("23e7"),o=r("b727").map,a=r("1dde"),s=a("map");n({target:"Array",proto:!0,forced:!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},dcbd:function(t,e,r){"use strict";r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return a})),r.d(e,"e",(function(){return s})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return u})),r.d(e,"h",(function(){return c})),r.d(e,"a",(function(){return l}));r("99af");var n=r("db04"),o=function(t){return n["a"].http({url:"/shop/order/insert",method:"put",data:t})},a=function(t){return n["a"].http({url:"/shop/order/insert/buy-car",method:"put",data:t})},s=function(t){return n["a"].http({url:"/shop/order/list/page/user",method:"get",params:t})},d=function(t){return n["a"].http({url:"/shop/order/find/orderNo/".concat(t),method:"get"})},i=function(t){return n["a"].http({url:"/shop/order/get/goods",method:"get",params:{id:t}})},u=function(t){return n["a"].http({url:"/shop/order/fallback/goods",method:"post",data:t})},c=function(t){return n["a"].http({url:"/shop/order/update/team/id/".concat(t.id,"/password/").concat(t.password),method:"put"})},l=function(t){return n["a"].http({url:"/shop/order/delete-order/id/".concat(t),method:"delete"})}},e6e4:function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return d})),r.d(e,"a",(function(){return i}));var n=r("db04"),o=function(t){return n["a"].http({url:"/user/address/list/page",method:"get",params:t})},a=function(t){return n["a"].http({url:"/user/address/insert",method:"put",data:t})},s=function(t){return n["a"].http({url:"/user/address/find/id/".concat(t),method:"get"})},d=function(t){return n["a"].http({url:"/user/address/update",method:"put",data:t})},i=function(t){return n["a"].http({url:"/user/address/delete/id/".concat(t),method:"delete"})}},fb30:function(t,e,r){"use strict";r("d0fc")}}]);
//# sourceMappingURL=chunk-2a333c10.f3f9e090.js.map