(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36d2be62"],{"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,o=n("a640"),a=n("2d00"),s=n("605d"),c=o("reduce"),u=!s&&a>79&&a<83;r({target:"Array",proto:!0,forced:!c||u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"3f69":function(t,e,n){},"4d0c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buy-car-page"},[n("van-nav-bar",{attrs:{title:"购物车","left-text":"返回"},on:{"click-left":t.handleLeftClick}}),n("van-tabs",{model:{value:t.isDeal,callback:function(e){t.isDeal=e},expression:"isDeal"}},[n("van-tab",{attrs:{title:"未结算",name:"0"}}),n("van-tab",{attrs:{title:"已结算",name:"1"}})],1),t._l(t.list,(function(e,r){return n("van-card",{key:e.goodsId,attrs:{price:e.goodsPrice*e.goodsDiscount/10,desc:e.goodsDescription,title:e.goodsName,thumb:e.goodsLogo,"origin-price":e.goodsPrice},on:{click:function(n){return t.handleGoodsInfo(e)}},scopedSlots:t._u([{key:"num",fn:function(){return[t._v("库存:"+t._s(e.goodsCount))]},proxy:!0},{key:"thumb",fn:function(){return[n("div",{staticClass:"logo"},[0==t.isDeal?n("van-checkbox",{staticClass:"checkbox",attrs:{shape:"square"},on:{click:function(n){return t.handleChecked(n,e,r)}},model:{value:t.list[r].checked,callback:function(e){t.$set(t.list[r],"checked",e)},expression:"list[index].checked"}}):t._e(),n("img",{staticClass:"img",attrs:{src:e.goodsLogo,alt:""}})],1)]},proxy:!0},{key:"bottom",fn:function(){return[n("div",{staticClass:"num"},[t._v(" 购买数量： "),0==t.isDeal?n("van-button",{staticClass:"btns",attrs:{size:"mini"},on:{click:function(n){return t.handlePlus(e,r)}}},[t._v("+")]):t._e(),t._v(" "+t._s(e.buyCount)+" "),0==t.isDeal?n("van-button",{staticClass:"btns",attrs:{size:"mini"},on:{click:function(n){return t.handleSub(e,r)}}},[t._v("-")]):t._e()],1),n("div",{staticClass:"preview"},[n("van-button",{attrs:{type:"info",size:"mini"},on:{click:function(n){return t.handlePreview(e)}}},[t._v("查看商品")]),n("van-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.handleDelete(e)}}},[t._v("删除")]),1==t.isDeal?n("van-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){return t.handlePreviewOrder(e)}}},[t._v("查看订单")]):t._e()],1)]},proxy:!0}],null,!0)})})),0==t.isDeal?n("van-submit-bar",{attrs:{price:t.getTotalPrice,"button-text":"提交订单"},on:{submit:t.onSubmit}},[n("van-checkbox",{model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}},[t._v("全选")])],1):t._e()],2)},i=[],o=n("5530"),a=n("1da1"),s=(n("96cf"),n("13d5"),n("d81d"),n("4de4"),n("dc9b")),c={data:function(){return{list:[],userInfo:{},isDeal:0,allChecked:!1,totalPrice:0}},computed:{getTotalPrice:function(){if(0==this.list.length)return 0;var t=this.list.reduce((function(t,e,n,r){var i,o,a;return 1==n?(i=0==t.checked?0:t.goodsPrice*t.goodsDiscount/10*t.buyCount,o=0==e.checked?0:e.goodsPrice*e.goodsDiscount/10*e.buyCount,i+o):(a=0==e.checked?t+0:t+e.goodsPrice*e.goodsDiscount/10*e.buyCount,a)}));return"number"!=typeof t&&(t=t.checked?t.goodsPrice*t.goodsDiscount/10*t.buyCount:0),100*t}},created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userInfo=JSON.parse(sessionStorage.userInfo),e.next=3,t.getBuyCarList();case 3:case"end":return e.stop()}}),e)})))()},watch:{isDeal:function(t){this.getBuyCarList()},allChecked:function(t){this.list=this.list.map((function(e){return e.checked=t,e}))}},methods:{getBuyCarList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])({id:t.userInfo.id,isDeal:t.isDeal});case 2:n=e.sent,200==n.data.code&&(t.list=n.data.data.list.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{checked:!1})})));case 4:case"end":return e.stop()}}),e)})))()},handleLeftClick:function(){this.$router.history.go(-1)},handleGoodsInfo:function(t){},handleChecked:function(t,e,n){},handlePreview:function(t){this.$router.push({path:"/shop-info",query:{id:t.goodsId}})},handleDelete:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$dialog.confirm({title:"提示",message:"正在从购物车删除，点击确认继续"}).catch((function(t){return t}));case 2:if(r=n.sent,"confirm"!=r){n.next=10;break}return n.next=6,Object(s["b"])(t.id);case 6:return i=n.sent,200==i.data.code&&e.$notify({type:"success",message:i.data.msg}),n.next=10,e.getBuyCarList();case 10:case"end":return n.stop()}}),n)})))()},handlePlus:function(t,e){t.buyCount=t.buyCount+1,t.buyCount>=t.goodsCount&&(t.buyCount=t.goodsCount),this.$set(this.list,e,t)},handleSub:function(t,e){t.buyCount=t.buyCount-1,t.buyCount<=1&&(t.buyCount=1),this.$set(this.list,e,t)},onSubmit:function(){var t=this.list.filter((function(t){return t.checked}));t.length>0?this.$router.push({name:"shop-order-buy-car",params:{formList:t}}):this.$notify({type:"danger",message:"您还没选择商品结算"})},handlePreviewOrder:function(t){console.log(t),this.$router.push({path:"/order-info",query:{orderNo:t.orderNo}})}}},u=c,d=(n("6b3a"),n("2877")),l=Object(d["a"])(u,r,i,!1,null,"1bc7263a",null);e["default"]=l.exports},"6b3a":function(t,e,n){"use strict";n("3f69")},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),o=n("44ad"),a=n("50c4"),s=function(t){return function(e,n,s,c){r(n);var u=i(e),d=o(u),l=a(u.length),f=t?l-1:0,h=t?-1:1;if(s<2)while(1){if(f in d){c=d[f],f+=h;break}if(f+=h,t?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:l>f;f+=h)f in d&&(c=n(c,d[f],f,u));return c}};t.exports={left:s(!1),right:s(!0)}},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=o("map");r({target:"Array",proto:!0,forced:!a},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dc9b:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n("db04"),i=function(t){return r["a"].http({url:"/shop/buy-car/list",method:"get",params:t})},o=function(t){return r["a"].http({url:"/shop/buy-car/insert",method:"put",data:t})},a=function(t){return r["a"].http({url:"/shop/buy-car/delete/id/".concat(t),method:"delete"})}}}]);
//# sourceMappingURL=chunk-36d2be62.8e933340.js.map