(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8dcb5c2e"],{"99af":function(t,e,r){"use strict";var a=r("23e7"),n=r("d039"),o=r("e8b5"),s=r("861d"),u=r("7b0b"),i=r("50c4"),c=r("8418"),d=r("65f0"),l=r("1dde"),f=r("b622"),h=r("2d00"),m=f("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",g=h>=51||!n((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=l("concat"),w=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},D=!g||!b;a({target:"Array",proto:!0,forced:D},{concat:function(t){var e,r,a,n,o,s=u(this),l=d(s,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?s:arguments[e],w(o)){if(n=i(o.length),f+n>p)throw TypeError(v);for(r=0;r<n;r++,f++)r in o&&c(l,f,o[r])}else{if(f>=p)throw TypeError(v);c(l,f++,o)}return l.length=f,l}})},"9fac":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-nav-bar",{attrs:{title:"下单","left-text":"返回"},on:{"click-left":t.handleLeftClick}}),r("van-cell-group",[r("van-cell",{attrs:{title:"商品名称",value:t.formData.name}}),r("van-cell",{attrs:{title:"商品原价",value:t.formData.price}}),r("van-cell",{attrs:{title:"商品折扣",value:t.formData.discount}}),r("van-cell",{attrs:{title:"商品库存",value:t.formData.hasCount}}),r("van-cell",{attrs:{title:"商品描述",value:t.formData.description}}),r("van-cell",{attrs:{title:"购买数量",value:t.formData.count}},[r("div",{staticClass:"num"},[t._v(" 购买数量： "),r("van-button",{staticClass:"btns",attrs:{size:"mini"},on:{click:function(e){return t.handlePlus(t.formData)}}},[t._v("+")]),t._v(" "+t._s(t.formData.count)+" "),r("van-button",{staticClass:"btns",attrs:{size:"mini"},on:{click:function(e){return t.handleSub(t.formData)}}},[t._v("-")])],1)]),t.hasAddress?r("van-cell",{attrs:{title:"收货地址","is-link":"",to:"/user-address",value:t.getAddressStr}}):r("van-cell",{attrs:{title:"收货地址","is-link":"",value:"点击设置",to:"/user-address"}}),r("van-field",{attrs:{rows:"2",autosize:"",label:"备注",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1),r("van-submit-bar",{attrs:{price:t.getTotalPrice,"button-text":"提交订单"},on:{submit:t.handleShowPassword}}),r("van-dialog",{attrs:{title:"支付密码","show-cancel-button":""},on:{confirm:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("van-field",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)],1)},n=[],o=r("5530"),s=r("1da1"),u=(r("b0c0"),r("96cf"),r("e6e4")),i=r("dcbd"),c={computed:{getAddressStr:function(){return this.addressInfo.province+this.addressInfo.city+this.addressInfo.area+this.addressInfo.address},getTotalPrice:function(){return this.formData.price*this.formData.discount/10*this.formData.count*100}},methods:{handleLeftClick:function(){this.$router.history.go(-1)},handlePlus:function(t){this.formData.count=this.formData.count+1,this.formData.count>=this.formData.hasCount&&(this.formData.count=this.formData.hasCount)},handleSub:function(t){this.formData.count=this.formData.count-1,this.formData.count<=1&&(this.formData.count=1)},getAddressListForPage:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])({pno:1,psize:10});case 2:r=e.sent,200==r.data.code&&(a=r.data.data.list,console.log(a),0==a.length||1!=a[0].isDefault?t.hasAddress=!1:(t.hasAddress=!0,t.addressInfo=a[0]));case 4:case"end":return e.stop()}}),e)})))()},handleShowPassword:function(){0!=this.hasAddress?this.show=!0:this.$notify({type:"danger",message:"您还没有选择收货地址"})},onSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.formData,a=t.addressInfo,console.log(r,a),n=Object(o["a"])(Object(o["a"])({},a),{},{goodsId:r.id,type:1,addressId:a.id,count:r.count,goodsName:r.name,goodsPrice:r.price,goodsDiscount:r.discount,remark:r.remark,pay:t.getTotalPrice/100,password:r.password}),console.log(n),e.next=7,Object(i["f"])(n);case 7:s=e.sent,200==s.data.code&&(t.$notify({type:"success",message:s.data.msg}),t.$router.history.go(-1));case 9:case"end":return e.stop()}}),e)})))()}},data:function(){return{formData:{},addressInfo:{},hasAddress:!1,show:!1}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAddressListForPage();case 2:r=t.$route.params.formData,void 0==r?r=JSON.parse(sessionStorage.orderData1):(r.remark="",r.hasCount=r.count,r.count=1),sessionStorage.orderData1=JSON.stringify(r),t.formData=r;case 6:case"end":return e.stop()}}),e)})))()}},d=c,l=(r("b43f"),r("2877")),f=Object(l["a"])(d,a,n,!1,null,"5e16fee6",null);e["default"]=f.exports},b43f:function(t,e,r){"use strict";r("bd5b")},bd5b:function(t,e,r){},dcbd:function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"e",(function(){return s})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"h",(function(){return d})),r.d(e,"a",(function(){return l}));r("99af");var a=r("db04"),n=function(t){return a["a"].http({url:"/shop/order/insert",method:"put",data:t})},o=function(t){return a["a"].http({url:"/shop/order/insert/buy-car",method:"put",data:t})},s=function(t){return a["a"].http({url:"/shop/order/list/page/user",method:"get",params:t})},u=function(t){return a["a"].http({url:"/shop/order/find/orderNo/".concat(t),method:"get"})},i=function(t){return a["a"].http({url:"/shop/order/get/goods",method:"get",params:{id:t}})},c=function(t){return a["a"].http({url:"/shop/order/fallback/goods",method:"post",data:t})},d=function(t){return a["a"].http({url:"/shop/order/update/team/id/".concat(t.id,"/password/").concat(t.password),method:"put"})},l=function(t){return a["a"].http({url:"/shop/order/delete-order/id/".concat(t),method:"delete"})}},e6e4:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return i}));var a=r("db04"),n=function(t){return a["a"].http({url:"/user/address/list/page",method:"get",params:t})},o=function(t){return a["a"].http({url:"/user/address/insert",method:"put",data:t})},s=function(t){return a["a"].http({url:"/user/address/find/id/".concat(t),method:"get"})},u=function(t){return a["a"].http({url:"/user/address/update",method:"put",data:t})},i=function(t){return a["a"].http({url:"/user/address/delete/id/".concat(t),method:"delete"})}}}]);
//# sourceMappingURL=chunk-8dcb5c2e.967735e1.js.map